"use strict";(self.webpackChunkbhq_ius_moodle=self.webpackChunkbhq_ius_moodle||[]).push([[592],{7393:(z,p,o)=>{o.d(p,{D:()=>h});var e=o(9808),r=o(9201),c=o(5e3);let h=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=c.oAB({type:_}),_.\u0275inj=c.cJS({imports:[e.ez,r.V.forRoot()]}),_})()},7281:(z,p,o)=>{o.d(p,{t:()=>x});var e=o(5e3),r=o(2382),c=o(9751),h=o(6726),_=o(8335),d=o(9808),f=o(6042),E=o(2683),C=o(2643),L=o(5052),T=o(8186);function I(s,u){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"nz-upload",3),e.NdJ("nzChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.handleChange(n))})("nzFileListChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.fileList=n)}),e.TgZ(2,"p",4),e._UZ(3,"span",5),e.qZA(),e.TgZ(4,"p",6),e._uU(5,"Click ho\u1eb7c k\xe9o th\u1ea3 file v\xe0o v\xf9ng upload"),e.qZA(),e.TgZ(6,"p",7),e._uU(7," H\u1ed7 tr\u1ee3 upload 1 file ho\u1eb7c nhi\u1ec1u file "),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw(),l=e.MAs(4);e.xp6(1),e.Q6J("nzMultiple",!0)("nzBeforeUpload",t.beforeUpload)("nzFileList",t.fileList)("nzShowUploadList",t.showUploadList)("nzFileListRender",l)}}function D(s,u){if(1&s){const t=e.EpF();e.TgZ(0,"nz-upload",8),e.NdJ("nzChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.handleChange(n))})("nzFileListChange",function(n){e.CHM(t);const i=e.oxw();return e.KtG(i.fileList=n)}),e.TgZ(1,"p",4),e._UZ(2,"span",5),e.qZA(),e.TgZ(3,"p",6),e._uU(4,"Click ho\u1eb7c k\xe9o th\u1ea3 file v\xe0o v\xf9ng upload"),e.qZA(),e.TgZ(5,"p",7),e._uU(6," H\u1ed7 tr\u1ee3 upload 1 file ho\u1eb7c nhi\u1ec1u file "),e.qZA()()}if(2&s){const t=e.oxw(),l=e.MAs(4);e.Q6J("nzMultiple",!0)("nzBeforeUpload",t.beforeUpload)("nzFileList",t.fileList)("nzAction",t.urlBase)("nzShowUploadList",t.showUploadList)("nzFileListRender",l)}}function F(s,u){if(1&s){const t=e.EpF();e.TgZ(0,"nz-list-item")(1,"button",11),e.NdJ("click",function(){const i=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.downloadFile(i))}),e._uU(2,"T\u1ea3i xu\u1ed1ng"),e.qZA(),e.TgZ(3,"span",12),e._uU(4),e.qZA(),e.TgZ(5,"button",11),e.NdJ("click",function(){const i=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.removeFile(i))}),e._uU(6,"X\xf3a"),e.qZA()()}if(2&s){const t=u.$implicit;e.xp6(4),e.hij(" ",t.name," ")}}function M(s,u){if(1&s&&(e.TgZ(0,"nz-list",9),e.YNc(1,F,7,1,"nz-list-item",10),e.qZA()),2&s){const t=u.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}let x=(()=>{class s{constructor(t,l){this.msg=t,this.uploadService=l,this.progress=0,this.uploading=!1,this.fileList=[],this.showUploadList={showDownloadIcon:!0,showPreviewIcon:!0,showRemoveIcon:!0},this.fileListInput=[],this.fileName=[],this.fileType=".doc,.docx,.xls,.xlsx,.pdf,.png,.jpg,.txt,.zip,.rar,.csv,.xml",this.isShowLoadList=!0,this.isDialog=!1,this.progessEvent=new c.y,this.fileSize=10,this.onChange=new e.vpe,this.onDelete=new e.vpe,this.beforeUpload=n=>{if(this.fileType){let i=n.name,a=this.fileType.split(","),m=!1;for(const g of a)i.endsWith(g)&&(m=!0);if(!m)return this.msg.error("T\u1ec7p kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng"),this.uploading=!1,!1}if(this.fileSize){let i=n.size?Number((n.size/1048576).toFixed(2)):0;if(console.log(i),i>this.fileSize)return this.msg.error("K\xedch th\u01b0\u1edbc file v\u01b0\u1ee3t qu\xe1 "+this.fileSize+" Mb"),!1}return this.fileList=this.fileList.concat(n),this.isDialog&&this.onChange.emit(this.fileList),!1},this.removeFile=n=>{console.log(n),this.fileList=this.fileList.filter(a=>a.name!==n.name);let i={};return i.taskId=n.taskId,i.name=n.name,this.uploadService.deleteFileInTask(i).subscribe({next:a=>{this.onDelete.emit(a)},error:a=>{console.log(a)}}),!0},this.downloadFile=n=>(console.log(n),n.taskId&&this.uploadService.downloadFileInTask(n).subscribe({next:i=>{console.log(i);let a=i.type,m=[];m.push(i);let g=document.createElement("a");g.href=window.URL.createObjectURL(new Blob(m,{type:a})),g.setAttribute("download",n.name),document.body.appendChild(g),g.click()},error:i=>{console.log(i)}}),!0)}ngOnChanges(t){console.log(t),t.fileListInput&&t.fileListInput.currentValue&&(this.fileList=t.fileListInput.currentValue)}ngAfterViewInit(){this.fileListInput.length>0&&(this.fileList=this.fileListInput)}writeValue(t){this.fileList=t?t.map(l=>({uid:l.id,name:l.name,status:"done",size:l.size,data:l})):[]}registerOnChange(t){}registerOnTouched(t){}setDisabledState(t){}validate(t){return null}registerOnValidatorChange(t){}ngOnInit(){}handleChange({file:t,fileList:l}){const n=t.status;"uploading"!==n&&console.log(t,l),"done"===n?console.log(`${t.name} file uploaded successfully.`):"error"===n&&console.log(`${t.name} file upload failed.`)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.e),e.Y36(_.I))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-input-file"]],inputs:{fileListInput:"fileListInput",fileName:"fileName",fileType:"fileType",isShowLoadList:"isShowLoadList",urlBase:"urlBase",isDialog:"isDialog",progessEvent:"progessEvent",fileSize:"fileSize"},outputs:{onChange:"onChange",onDelete:"onDelete"},features:[e._Bn([{provide:r.JU,useExisting:(0,e.Gpc)(()=>s),multi:!0},{provide:r.Cf,useExisting:(0,e.Gpc)(()=>s),multi:!0}]),e.TTD],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["tmplUploadFile",""],["tmplFileList",""],["nzType","drag",3,"nzMultiple","nzBeforeUpload","nzFileList","nzShowUploadList","nzFileListRender","nzChange","nzFileListChange"],[1,"ant-upload-drag-icon"],["nz-icon","","nzType","inbox"],[1,"ant-upload-text"],[1,"ant-upload-hint"],["nzType","drag",3,"nzMultiple","nzBeforeUpload","nzFileList","nzAction","nzShowUploadList","nzFileListRender","nzChange","nzFileListChange"],["nzSize","small"],[4,"ngFor","ngForOf"],["nz-button","","nzType","default",3,"click"],[1,"text-left"]],template:function(t,l){if(1&t&&(e.YNc(0,I,8,5,"ng-container",0),e.YNc(1,D,7,6,"ng-template",null,1,e.W1O),e.YNc(3,M,2,1,"ng-template",null,2,e.W1O)),2&t){const n=e.MAs(2);e.Q6J("ngIf",l.isDialog)("ngIfElse",n)}},dependencies:[d.sg,d.O5,f.ix,E.w,C.dQ,L.FY,T.n_,T.AA],encapsulation:2}),s})()},7793:(z,p,o)=>{o.d(p,{C:()=>e});var e=(()=>{return(r=e||(e={})).success="Successful",r.badrequest="Bad request",r.error="Error",e;var r})()},3905:(z,p,o)=>{o.d(p,{z:()=>c});var e=o(6805),r=o(930);function c(h,_){const d="object"==typeof _;return new Promise((f,E)=>{const C=new r.Hp({next:L=>{f(L),C.unsubscribe()},error:E,complete:()=>{d?f(_.defaultValue):E(new e.K)}});h.subscribe(C)})}}}]);